namespace:
  create: true
  name: minecharts

imagePullSecrets: []

api:
  fullnameOverride: minecharts-api
  appLabel: minecharts-api
  replicaCount: 1
  strategy: Recreate
  image:
    repository: registry.prod.nasdak.fr/l.angonnet/minecharts/api
    tag: latest
    pullPolicy: Always
  serviceAccount:
    create: true
    name: minecharts-api
  rbac:
    create: true
  service:
    # Default to ClusterIP; use NodePort/LoadBalancer only if you need direct access without ingress.
    type: ClusterIP
    port: 8080
    targetPort: 8080
    nodePort: null
  persistence:
    # Keeps JWT secret and optional SQLite DB on disk. Disable only if you use Postgres
    # and can tolerate regenerating the JWT secret on every restart.
    enabled: true
    existingClaim: ""
    claimName: minecharts-api-data-pvc
    storageClass: ""
    accessModes:
      - ReadWriteOnce
    # JWT alone is a few bytes; if your storage class allows it, 1Mi is enough.
    # Default kept higher for compatibility; bump to ~1Gi if you keep SQLite on disk.
    size: 32Mi
    mountPath: /app/data
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  env:
    - name: MINECHARTS_MCROUTER_DOMAIN_SUFFIX
      value: "minecharts.example.com"
  secretEnv: []
  envFromSecrets: []

web:
  fullnameOverride: minecharts-web
  appLabel: minecharts
  replicaCount: 1
  strategy: Recreate
  image:
    repository: registry.prod.nasdak.fr/l.angonnet/minecharts/web
    tag: latest
    pullPolicy: Always
  serviceAccount:
    create: true
    name: minecharts
  rbac:
    create: true
  service:
    type: ClusterIP
    port: 80
    targetPort: 80
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  env:
    - name: ENABLE_TLS
      value: "FALSE"
  secretEnv: []
  envFromSecrets: []

middleware:
  enabled: true
  name: minecharts-api-strip
  prefixes:
    - /api

ingress:
  enabled: true
  nameOverride: minecharts
  className: ""
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-production
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
  middlewareAnnotation: true
  host: minecharts.example.com
  tls:
    enabled: true
    secretName: ""
